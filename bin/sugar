#! /usr/bin/env python

"""
This replicates a common calculator seen online:

    - http://brewblogger.zkdigital.com/index.php?page=tools&section=plato&action=calculate
    - http://www.brewersfriend.com/brix-converter/
"""  # nopep8

import argparse
import sys

from brew.cli.sugar import get_sugar_conversion


def main():
    parser = argparse.ArgumentParser(description='Sugar Conversion')
    parser.add_argument('-b', '--brix', metavar='B', type=float,
                        help='Degrees Brix')
    parser.add_argument('-p', '--plato', metavar='P', type=float,
                        help='Degrees Plato')
    parser.add_argument('-s', '--sg', metavar='S', type=float,
                        help='Specific Gravity')
    parser.add_argument('-o', '--out', metavar='O', type=str,
                        help='Desired Output (b, p, s accepted)')

    args = parser.parse_args()

    if sum(bool(arg) for arg in [args.brix, args.plato, args.sg]) != 1:
        print("Must provide only one of Brix, Plato or Specific Gravity")
        sys.exit(1)
    print(get_sugar_conversion(args.brix, args.plato, args.sg, args.out))


if __name__ == "__main__":
    main()
